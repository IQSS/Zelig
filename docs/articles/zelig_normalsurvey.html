<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Normal Survey Regression • Zelig</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Zelig Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/quickstart.html">Quickstart</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html#section-zelig-overview">Zelig Overview</a>
    </li>
    <li>
      <a href="../articles/index.html#section-core-zelig-model-details">Zelig Model Details</a>
    </li>
    <li>
      <a href="../articles/index.html#section-other">Other</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Function Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html#section-main-zelig-workflow">Workflow</a>
    </li>
    <li>
      <a href="../reference/index.html#section-estimation-methods">Estimation Methods</a>
    </li>
    <li>
      <a href="../reference/index.html#section-exterior-interaction-functions">Interacting Outside of Zelig</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/about.html">Contact/Development Team/Citation</a>
    </li>
    <li>
      <a href="../articles/roadmap.html">Development Roadmap</a>
    </li>
    <li>
      <a href="https://iqss.github.io/rpackagemetrics/">Zelig Adoption Metrics</a>
    </li>
    <li>
      <a href="https://raw.githubusercontent.com/IQSS/Zelig/master/.iqss_reportcard.yml">Statistical Software Devepment Reportcard</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://medium.com/zelig-dev/archive">
    <span class="fa fa-medium"></span>
     
    Dev-Blog
  </a>
</li>
<li>
  <a href="https://twitter.com/zeligproject">
    <span class="fa fa-twitter fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/IQSS/Zelig">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Normal Survey Regression</h1>
            
            <h4 class="date">2017-06-22</h4>
          </div>

    
    
<div class="contents">
<p><em>Built using Zelig version 5.1.2.9000</em></p>
<hr>
<p>Normal Regression for Continuous Dependent Variables with Survey Weights with <code>normal.survey</code>.</p>
<p>The Normal regression model is a close variant of the more standard least squares regression model (see <a href="zelig_normal.html">Normal Regress</a>). Both models specify a continuous dependent variable as a linear function of a set of explanatory variables. The Normal model reports maximum likelihood (rather than least squares) estimates. The two models differ only in their estimate for the stochastic parameter <span class="math inline">\(\sigma\)</span>.</p>
<div id="syntax" class="section level2">
<h2 class="hasAnchor">
<a href="#syntax" class="anchor"></a>Syntax</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(Y ~<span class="st"> </span>X1 +<span class="st"> </span>X2, <span class="dt">model =</span> <span class="st">"normal.survey"</span>, <span class="dt">weights =</span> w,
               <span class="dt">data =</span> mydata)
x.out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out)
s.out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim.html">sim</a></span>(z.out, <span class="dt">x =</span> x.out)</code></pre></div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="example-1-user-has-existing-sample-weights" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-user-has-existing-sample-weights" class="anchor"></a>Example 1: User has Existing Sample Weights</h3>
<p>Attach sample data and variable names:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(api, <span class="dt">package =</span> <span class="st">"survey"</span>)</code></pre></div>
<p>In this example, we will estimate a model using the percentages of students who receive subsidized lunch (<code>meals</code>) and an indicator for whether schooling is year-round (<code>yr.rnd</code>) to predict California public schools’ academic performance index scores (<code>api00</code>). Sampling weights are stored in a variable called <code>pw</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(api00 ~<span class="st"> </span>meals +<span class="st"> </span>yr.rnd, <span class="dt">model =</span> <span class="st">"normal.survey"</span>,
                <span class="dt">weights =</span> ~pw, <span class="dt">data =</span> apistrat)</code></pre></div>
<pre><code>## Warning: Not all features are available in Zelig Survey.
## Consider using surveyglm and setx directly.
## For details see: &lt;http://docs.zeligproject.org/articles/to_zelig.html&gt;.</code></pre>
<pre><code>## How to cite this model in Zelig:
##   Nicholas Carnes. 2017.
##   normal-survey: Normal Regression for Continuous Dependent Variables with Survey Weights
##   in Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, and Olivia Lau,
##   "Zelig: Everyone's Statistical Software," http://zeligproject.org/</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(z.out1)</code></pre></div>
<pre><code>## Model: 
## 
## Call:
## z5$zelig(formula = api00 ~ meals + yr.rnd, data = apistrat, weights = ~pw)
## 
## Survey design:
## survey::svydesign(data = data, ids = ids, probs = probs, strata = strata, 
##     fpc = fpc, nest = nest, check.strata = check.strata, weights = localWeights)
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)
## (Intercept) 846.0409     8.9836  94.176   &lt;2e-16
## meals        -3.4882     0.1678 -20.783   &lt;2e-16
## yr.rndYes   -15.4566    15.6413  -0.988    0.324
## 
## (Dispersion parameter for gaussian family taken to be 155138.3)
## 
## Number of Fisher Scoring iterations: 2
## 
## Next step: Use 'setx' method</code></pre>
<p>Set explanatory variables to their default (mean/mode) values, and set a high (80th percentile) and low (20th percentile) value for “meals,” the percentage of students who receive subsidized meals:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x.low &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out1, <span class="dt">meals =</span> <span class="kw">quantile</span>(apistrat$meals, <span class="fl">0.2</span>))
x.high &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out1, <span class="dt">meals =</span> <span class="kw">quantile</span>(apistrat$meals, <span class="fl">0.8</span>))</code></pre></div>
<p>Generate first differences for the effect of high versus low “meals” on academic performance:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s.out1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim.html">sim</a></span>(z.out1, <span class="dt">x =</span> x.high, <span class="dt">x1 =</span> x.low)
<span class="kw">summary</span>(s.out1)</code></pre></div>
<pre><code>## 
##  sim x :
##  -----
## ev
##          mean      sd      50%     2.5%    97.5%
## [1,] 587.3657 7.32722 587.2933 572.4778 602.4199
## pv
##          mean       sd      50%      2.5%    97.5%
## [1,] 606.9886 376.4908 611.1407 -123.9886 1307.963
## 
##  sim x1 :
##  -----
## ev
##          mean       sd      50%     2.5%    97.5%
## [1,] 783.0764 6.718347 783.2417 770.1292 796.5756
## pv
##          mean       sd      50%     2.5%    97.5%
## [1,] 786.6935 390.9711 777.5449 48.42074 1567.279
## fd
##          mean       sd      50%     2.5%    97.5%
## [1,] 195.7107 9.248029 195.8242 178.0784 213.7883</code></pre>
<p>Generate a second set of fitted values and a plot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(s.out1)</code></pre></div>
<div class="figure">
<img src="zelig_normalsurvey_files/figure-html/Zelig-normalsurvey1-1.png" alt="Graphs of Quantities of Interest for Normal Survey Model" width="672"><p class="caption">
Graphs of Quantities of Interest for Normal Survey Model
</p>
</div>
</div>
<div id="example-2-user-has-details-about-complex-survey-design-but-not-sample-weights" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2-user-has-details-about-complex-survey-design-but-not-sample-weights" class="anchor"></a>Example 2: User has Details about Complex Survey Design (but not sample weights)</h3>
<p>Suppose that the survey house that provided the dataset excluded probability weights but made other details about the survey design available. We can still estimate a model without probability weights that takes instead variables that identify each the stratum and/or cluster from which each observation was selected and the size of the finite sample from which each observation was selected.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(api00 ~<span class="st"> </span>meals +<span class="st"> </span>yr.rnd, <span class="dt">model =</span> <span class="st">"normal.survey"</span>,
                <span class="dt">strata =</span> ~stype, <span class="dt">fpc =</span> ~fpc, <span class="dt">data =</span> apistrat)</code></pre></div>
<pre><code>## Warning: Not all features are available in Zelig Survey.
## Consider using surveyglm and setx directly.
## For details see: &lt;http://docs.zeligproject.org/articles/to_zelig.html&gt;.</code></pre>
<pre><code>## How to cite this model in Zelig:
##   Nicholas Carnes. 2017.
##   normal-survey: Normal Regression for Continuous Dependent Variables with Survey Weights
##   in Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, and Olivia Lau,
##   "Zelig: Everyone's Statistical Software," http://zeligproject.org/</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(z.out2)</code></pre></div>
<pre><code>## Model: 
## 
## Call:
## z5$zelig(formula = api00 ~ meals + yr.rnd, data = apistrat, strata = ~stype, 
##     fpc = ~fpc)
## 
## Survey design:
## survey::svydesign(data = data, ids = ids, probs = probs, strata = strata, 
##     fpc = fpc, nest = nest, check.strata = check.strata, weights = localWeights)
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)
## (Intercept) 825.1058     8.3552  98.753   &lt;2e-16
## meals        -3.3581     0.1644 -20.430   &lt;2e-16
## yr.rndYes    -6.3855    15.1624  -0.421    0.674
## 
## (Dispersion parameter for gaussian family taken to be 5225.087)
## 
## Number of Fisher Scoring iterations: 2
## 
## Next step: Use 'setx' method</code></pre>
<p>Note that these results are identical to the results obtained when pre-existing sampling weights were used. When sampling weights are omitted, Zelig estimates them automatically for “normal.survey” models based on the user-defined description of sampling designs. If no description is present, the default assumption is equal probability sampling.</p>
<p>The methods <code><a href="../reference/setx.html">setx()</a></code> and <code><a href="../reference/sim.html">sim()</a></code> can then be run on <code>z.out2</code> in the same fashion described above.</p>
</div>
<div id="example-3-user-has-replicate-weights" class="section level3">
<h3 class="hasAnchor">
<a href="#example-3-user-has-replicate-weights" class="anchor"></a>Example 3: User has Replicate Weights</h3>
<p>Load data for a model using the number of out-of-hospital cardiac arrests to predict the number of patients who arrive alive in hospitals:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(scd, <span class="dt">package =</span> <span class="st">"survey"</span>)</code></pre></div>
<p>Create four Balanced Repeated Replicate (BRR) weights:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">BRRrep &lt;-<span class="st"> </span><span class="dv">2</span>*<span class="kw">cbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>),
                <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>))</code></pre></div>
<p>Estimate the model using Zelig:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(<span class="dt">formula=</span>alive ~<span class="st"> </span>arrests , <span class="dt">model =</span> <span class="st">"normal.survey"</span>,
                <span class="dt">repweights =</span> BRRrep, <span class="dt">type =</span> <span class="st">"BRR"</span>,
                <span class="dt">data =</span> scd, <span class="dt">na.action =</span> <span class="ot">NULL</span>)</code></pre></div>
<pre><code>## Warning: Not all features are available in Zelig Survey.
## Consider using surveyglm and setx directly.
## For details see: &lt;http://docs.zeligproject.org/articles/to_zelig.html&gt;.</code></pre>
<pre><code>## Warning in svrepdesign.default(data = data, repweights = repweights, type =
## type, : No sampling weights provided: equal probability assumed</code></pre>
<pre><code>## How to cite this model in Zelig:
##   Nicholas Carnes. 2017.
##   normal-survey: Normal Regression for Continuous Dependent Variables with Survey Weights
##   in Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, and Olivia Lau,
##   "Zelig: Everyone's Statistical Software," http://zeligproject.org/</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(z.out3)</code></pre></div>
<pre><code>## Model: 
## 
## Call:
## z5$zelig(formula = alive ~ arrests, data = scd, repweights = BRRrep, 
##     type = "BRR", na.action = NULL)
## 
## Survey design:
## svrepdesign.default(data = data, repweights = repweights, type = type, 
##     weights = localWeights, combined.weights = combined.weights, 
##     rho = rho, bootstrap.average = bootstrap.average, scale = scale, 
##     rscales = rscales, fpctype = fpctype, fpc = fpc)
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)
## (Intercept) 16.777828   3.949296   4.248  0.05119
## arrests      0.097920   0.006064  16.149  0.00381
## 
## (Dispersion parameter for gaussian family taken to be 23.65681)
## 
## Number of Fisher Scoring iterations: 2
## 
## Next step: Use 'setx' method</code></pre>
<p>Set the explanatory variable at its minimum and maximum</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x.min &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out3, <span class="dt">arrests =</span> <span class="kw">min</span>(scd$alive))
x.max &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out3, <span class="dt">arrests =</span> <span class="kw">max</span>(scd$alive))</code></pre></div>
<p>Generate first differences for the effect of the minimum versus the maximum number of cardiac arrests on the number of people who arrive alive:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s.out3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim.html">sim</a></span>(z.out3, <span class="dt">x=</span>x.max, <span class="dt">x1=</span>x.min)
<span class="kw">summary</span>(s.out3)</code></pre></div>
<pre><code>## 
##  sim x :
##  -----
## ev
##          mean       sd      50%     2.5%    97.5%
## [1,] 24.47312 3.603297 24.56658 17.75726 31.51732
## pv
##          mean       sd      50%    2.5%    97.5%
## [1,] 24.41233 12.22076 24.53819 2.84381 45.37047
## 
##  sim x1 :
##  -----
## ev
##          mean       sd      50%     2.5%    97.5%
## [1,] 18.97948 3.876408 19.06842 11.69499 26.37252
## pv
##          mean      sd      50%       2.5%   97.5%
## [1,] 19.47485 12.3683 18.89057 -0.7115458 40.6895
## fd
##           mean        sd       50%      2.5%    97.5%
## [1,] -5.493631 0.3337031 -5.489195 -6.142893 -4.83746</code></pre>
<p>Generate a second set of fitted values and a plot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(s.out3)</code></pre></div>
<div class="figure">
<img src="zelig_normalsurvey_files/figure-html/Zelig-normalsurvey3-1.png" alt="Graphs of Quantities of Interest for Normal Survey Model" width="672"><p class="caption">
Graphs of Quantities of Interest for Normal Survey Model
</p>
</div>
<p>The user should also refer to the normal model demo, since normal.survey models can take many of the same options as normal models.</p>
</div>
</div>
<div id="model" class="section level2">
<h2 class="hasAnchor">
<a href="#model" class="anchor"></a>Model</h2>
<p>Let <span class="math inline">\(Y_i\)</span> be the continuous dependent variable for observation <span class="math inline">\(i\)</span>.</p>
<ul>
<li>The <em>stochastic component</em> is described by a univariate normal model with a vector of means <span class="math inline">\(\mu_i\)</span> and scalar variance <span class="math inline">\(\sigma^2\)</span>:</li>
</ul>
<p><span class="math display">\[
    Y_i \; \sim \; \textrm{Normal}(\mu_i, \sigma^2).
\]</span></p>
<ul>
<li>The <em>systematic component</em> is</li>
</ul>
<p><span class="math display">\[
    \mu_i \;= \; x_i \beta,
\]</span></p>
<p>where <span class="math inline">\(x_i\)</span> is the vector of <span class="math inline">\(k\)</span> explanatory variables and <span class="math inline">\(\beta\)</span> is the vector of coefficients.</p>
</div>
<div id="quantities-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#quantities-of-interest" class="anchor"></a>Quantities of Interest</h2>
<ul>
<li>The expected value (qi$ev) is the mean of simulations from the the stochastic component,</li>
</ul>
<p><span class="math display">\[
    E(Y) = \mu_i = x_i \beta,
\]</span></p>
<p>given a draw of <span class="math inline">\(\beta\)</span> from its posterior.</p>
<ul>
<li><p>The predicted value (qi$pr) is drawn from the distribution defined by the set of parameters <span class="math inline">\((\mu_i, \sigma)\)</span>.</p></li>
<li><p>The first difference (qi$fd) is:</p></li>
</ul>
<p><span class="math display">\[
    \textrm{FD}\; = \;E(Y \mid x_1) -  E(Y \mid x)
\]</span></p>
<ul>
<li>In conditional prediction models, the average expected treatment effect (att.ev) for the treatment group is</li>
</ul>
<p><span class="math display">\[
    \frac{1}{\sum_{i=1}^n t_i}\sum_{i:t_i=1}^n \left\{ Y_i(t_i=1) -
        E[Y_i(t_i=0)] \right\},
\]</span></p>
<p>where <span class="math inline">\(t_i\)</span> is a binary explanatory variable defining the treatment (<span class="math inline">\(t_i=1\)</span>) and control (<span class="math inline">\(t_i=0\)</span>) groups. Variation in the simulations are due to uncertainty in simulating <span class="math inline">\(E[Y_i(t_i=0)]\)</span>, the counterfactual expected value of <span class="math inline">\(Y_i\)</span> for observations in the treatment group, under the assumption that everything stays the same except that the treatment indicator is switched to <span class="math inline">\(t_i=0\)</span>.</p>
<ul>
<li>In conditional prediction models, the average predicted treatment effect (att.pr) for the treatment group is</li>
</ul>
<p><span class="math display">\[
    \frac{1}{\sum_{i=1}^n t_i}\sum_{i:t_i=1}^n \left\{ Y_i(t_i=1) -
        \widehat{Y_i(t_i=0)} \right\},
\]</span></p>
<p>where <span class="math inline">\(t_i\)</span> is a binary explanatory variable defining the treatment (<span class="math inline">\(t_i=1\)</span>) and control (<span class="math inline">\(t_i=0\)</span>) groups. Variation in the simulations are due to uncertainty in simulating <span class="math inline">\(\widehat{Y_i(t_i=0)}\)</span>, the counterfactual predicted value of <span class="math inline">\(Y_i\)</span> for observations in the treatment group, under the assumption that everything stays the same except that the treatment indicator is switched to <span class="math inline">\(t_i=0\)</span>.</p>
</div>
<div id="output-values" class="section level2">
<h2 class="hasAnchor">
<a href="#output-values" class="anchor"></a>Output Values</h2>
<p>The Zelig object stores fields containing everything needed to rerun the Zelig output, and all the results and simulations as they are generated. In addition to the summary commands demonstrated above, some simply utility functions (known as <em>getters</em>) provide easy access to the raw fields most commonly of use for further investigation.</p>
<p>In the example above <code>z.out$get_coef()</code> returns the estimated coefficients, <code>z.out$get_vcov()</code> returns the estimated covariance matrix, and <code>z.out$get_predict()</code> provides predicted values for all observations in the dataset from the analysis.</p>
</div>
<div id="see-also" class="section level2">
<h2 class="hasAnchor">
<a href="#see-also" class="anchor"></a>See also</h2>
<p>The normalsurvey model is part of the survey package by Thomas Lumley, which in turn depends heavily on <code>glm</code> package. Advanced users may wish to refer to <code>help(svyglm)</code> and <code>help(family)</code>.</p>
<p>Lumley T (2016). “survey: analysis of complex survey samples.” R package version 3.31-5.</p>
<p>Lumley T (2004). “Analysis of Complex Survey Samples.” <em>Journal of Statistical Software</em>, <strong>9</strong> (1), pp. 1-19. R package verson 2.2.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#syntax">Syntax</a></li>
      <li><a href="#examples">Examples</a></li>
      <li><a href="#model">Model</a></li>
      <li><a href="#quantities-of-interest">Quantities of Interest</a></li>
      <li><a href="#output-values">Output Values</a></li>
      <li><a href="#see-also">See also</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, Olivia Lau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
