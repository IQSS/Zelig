<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Logistic Regression â€¢ Zelig</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Zelig Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/quickstart.html">Quickstart</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html#section-zelig-overview">Zelig Overview</a>
    </li>
    <li>
      <a href="../articles/index.html#section-core-zelig-model-details">Zelig Model Details</a>
    </li>
    <li>
      <a href="../articles/index.html#section-other">Other</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Function Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html#section-main-zelig-workflow">Workflow</a>
    </li>
    <li>
      <a href="../reference/index.html#section-estimation-methods">Estimation Methods</a>
    </li>
    <li>
      <a href="../reference/index.html#section-exterior-interaction-functions">Interacting Outside of Zelig</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/about.html">Contact/Development Team/Citation</a>
    </li>
    <li>
      <a href="../articles/roadmap.html">Development Roadmap</a>
    </li>
    <li>
      <a href="https://iqss.github.io/rpackagemetrics/">Zelig Adoption Metrics</a>
    </li>
    <li>
      <a href="https://raw.githubusercontent.com/IQSS/Zelig/master/.iqss_reportcard.yml">Statistical Software Devepment Reportcard</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://medium.com/zelig-dev/archive">
    <span class="fa fa-medium"></span>
     
    Dev-Blog
  </a>
</li>
<li>
  <a href="https://twitter.com/zeligproject">
    <span class="fa fa-twitter fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/IQSS/Zelig">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Logistic Regression</h1>
            
            <h4 class="date">2017-06-22</h4>
          </div>

    
    
<div class="contents">
<p><em>Built using Zelig version 5.1.2.9000</em></p>
<p>Logistic Regression for Dichotomous Dependent Variables with <code>logit</code>.</p>
<p>Logistic regression specifies a dichotomous dependent variable as a function of a set of explanatory variables.</p>
<div id="syntax" class="section level2">
<h2 class="hasAnchor">
<a href="#syntax" class="anchor"></a>Syntax</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(Y ~<span class="st"> </span>X1 +<span class="st"> </span>X2, <span class="dt">model =</span> <span class="st">"logit"</span>, <span class="dt">weights =</span> w, <span class="dt">data =</span> mydata)
x.out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out)
s.out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim.html">sim</a></span>(z.out, <span class="dt">x =</span> x.out, <span class="dt">x1 =</span> <span class="ot">NULL</span>)</code></pre></div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<div id="basic-example" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-example" class="anchor"></a>Basic example</h3>
<p>Load Zelig and attach the sample turnout dataset:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(Zelig)</code></pre></div>
<pre><code>## Loading required package: survival</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(turnout)</code></pre></div>
<p>Estimating parameter values for the logistic regression:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(vote ~<span class="st"> </span>age +<span class="st"> </span>race, <span class="dt">model =</span> <span class="st">"logit"</span>, <span class="dt">data =</span> turnout,
                <span class="dt">cite =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Summarize estimated paramters:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(z.out1)</code></pre></div>
<pre><code>## Model: 
## 
## Call:
## z5$zelig(formula = vote ~ age + race, data = turnout)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -1.9268  -1.2962   0.7072   0.7766   1.0723  
## 
## Coefficients:
##             Estimate Std. Error z value Pr(&gt;|z|)
## (Intercept) 0.038365   0.176920   0.217 0.828325
## age         0.011263   0.003053   3.689 0.000225
## racewhite   0.645551   0.134482   4.800 1.58e-06
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 2266.7  on 1999  degrees of freedom
## Residual deviance: 2228.8  on 1997  degrees of freedom
## AIC: 2234.8
## 
## Number of Fisher Scoring iterations: 4
## 
## Next step: Use 'setx' method</code></pre>
<p>For <code>logit</code> models you can also include the argument <code>odds_ratios = TRUE</code> in the <code>summary</code> call to return odds ratios estimates (<span class="math inline">\(\mathrm{exp}(\beta)\)</span>):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(z.out1, <span class="dt">odds_ratios =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## Model: 
## 
## Call:
## z5$zelig(formula = vote ~ age + race, data = turnout)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -1.9268  -1.2962   0.7072   0.7766   1.0723  
## 
## Coefficients:
##             Estimate (OR) Std. Error (OR) z value Pr(&gt;|z|)    
## (Intercept)         1.039           1.194   0.217 0.828325    
## age                 1.011           1.003   3.689 0.000225 ***
## racewhite           1.907           1.144   4.800 1.58e-06 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 2266.7  on 1999  degrees of freedom
## Residual deviance: 2228.8  on 1997  degrees of freedom
## AIC: 2234.8
## 
## Number of Fisher Scoring iterations: 4</code></pre>
<p>Set values for the explanatory variables:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x.out1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out1, <span class="dt">age =</span> <span class="dv">36</span>, <span class="dt">race =</span> <span class="st">"white"</span>)</code></pre></div>
<p>Simulate quantities of interest from the posterior distribution:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s.out1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim.html">sim</a></span>(z.out1, <span class="dt">x =</span> x.out1)
<span class="kw">summary</span>(s.out1)</code></pre></div>
<pre><code>## 
##  sim x :
##  -----
## ev
##           mean         sd       50%      2.5%     97.5%
## [1,] 0.7480016 0.01181577 0.7481666 0.7233089 0.7704255
## pv
##          0     1
## [1,] 0.222 0.778</code></pre>
<p>Show the results graphically:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(s.out1)</code></pre></div>
<p><img src="zelig_logit_files/figure-html/unnamed-chunk-8-1.png" width="672"></p>
</div>
</div>
<div id="first-differences" class="section level2">
<h2 class="hasAnchor">
<a href="#first-differences" class="anchor"></a>First differences</h2>
<p>Estimating the risk difference (and risk ratio) between low education (25th percentile) and high education (75th percentile) while all the other variables held at their default values.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(vote ~<span class="st"> </span>race +<span class="st"> </span>educate, <span class="dt">model =</span> <span class="st">"logit"</span>, <span class="dt">data =</span> turnout,
                <span class="dt">cite =</span> <span class="ot">FALSE</span>)
x.high &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out2, <span class="dt">educate =</span> <span class="kw">quantile</span>(turnout$educate, <span class="dt">prob =</span> <span class="fl">0.75</span>))
x.low &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out2, <span class="dt">educate =</span> <span class="kw">quantile</span>(turnout$educate, <span class="dt">prob =</span> <span class="fl">0.25</span>))
s.out2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim.html">sim</a></span>(z.out2, <span class="dt">x =</span> x.high, <span class="dt">x1 =</span> x.low)
<span class="kw">summary</span>(s.out2)</code></pre></div>
<pre><code>## 
##  sim x :
##  -----
## ev
##           mean         sd       50%   2.5%     97.5%
## [1,] 0.8226786 0.01029225 0.8225001 0.8015 0.8430421
## pv
##          0     1
## [1,] 0.168 0.832
## 
##  sim x1 :
##  -----
## ev
##           mean         sd       50%      2.5%     97.5%
## [1,] 0.7091908 0.01337713 0.7090525 0.6832002 0.7350503
## pv
##          0     1
## [1,] 0.297 0.703
## fd
##            mean         sd        50%       2.5%       97.5%
## [1,] -0.1134878 0.01172597 -0.1135099 -0.1353285 -0.09047672</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(s.out2)</code></pre></div>
<p><img src="zelig_logit_files/figure-html/unnamed-chunk-10-1.png" width="672"></p>
</div>
<div id="model-definition" class="section level2">
<h2 class="hasAnchor">
<a href="#model-definition" class="anchor"></a>Model Definition</h2>
<p>Let <span class="math inline">\(Y_i\)</span> be the binary dependent variable for observation <span class="math inline">\(i\)</span> which takes the value of either 0 or 1.</p>
<ul>
<li>The <em>stochastic component</em> is given by</li>
</ul>
<p><span class="math display">\[\begin{aligned}
Y_i &amp;\sim&amp; \textrm{Bernoulli}(y_i \mid \pi_i) \\
    &amp;=&amp; \pi_i^{y_i} (1-\pi_i)^{1-y_i}\end{aligned}
\]</span></p>
<p>where <span class="math inline">\(\pi_i=\Pr(Y_i=1)\)</span>.</p>
<ul>
<li>The <em>systematic component</em> is given by:</li>
</ul>
<p><span class="math display">\[\pi_i \; = \; \frac{1}{1 + \exp(-x_i \beta)}.\]</span></p>
<p>where <span class="math inline">\(x_i\)</span> is the vector of <span class="math inline">\(k\)</span> explanatory variables for observation <span class="math inline">\(i\)</span> and <span class="math inline">\(\beta\)</span> is the vector of coefficients.</p>
</div>
<div id="quantities-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#quantities-of-interest" class="anchor"></a>Quantities of Interest</h2>
<ul>
<li>The expected values for the logit model are simulations of the predicted probability of a success:</li>
</ul>
<p><span class="math display">\[
E(Y) =
  \pi_i= \frac{1}{1 + \exp(-x_i \beta)},
\]</span></p>
<p>given draws of <span class="math inline">\(\beta\)</span> from its sampling distribution.</p>
<ul>
<li><p>The predicted values are draws from the Binomial distribution with mean equal to the simulated expected value <span class="math inline">\(\pi_i\)</span>.</p></li>
<li><p>The first difference for the logit model is defined as</p></li>
</ul>
<p><span class="math display">\[\textrm{FD} = \Pr(Y = 1 \mid x_1) - \Pr(Y = 1 \mid x).\]</span></p>
<p>The risk ratio is defined as</p>
<p><span class="math display">\[\textrm{RR} = \Pr(Y = 1 \mid x_1) \ / \ \Pr(Y = 1 \mid x).\]</span></p>
<p>In conditional prediction models, the average expected treatment effect (att.ev) for the treatment group is</p>
<p><span class="math display">\[
\frac{1}{\sum_{i=1}^n t_i}\sum_{i:t_i=1}^n \left\{ Y_i(t_i=1) -
      E[Y_i(t_i=0)] \right\},
\]</span></p>
<p>where <span class="math inline">\(t_i\)</span> is a binary explanatory variable defining the treatment (<span class="math inline">\(t_i=1\)</span>) and control (<span class="math inline">\(t_i=0\)</span>) groups. Variation in the simulations are due to uncertainty in simulating <span class="math inline">\(E[Y_i(t_i=0)]\)</span>, the counterfactual expected value of <span class="math inline">\(Y_i\)</span> for observations in the treatment group, under the assumption that everything stays the same except that the treatment indicator is switched to <span class="math inline">\(t_i=0\)</span>.</p>
<ul>
<li>In conditional prediction models, the average predicted treatment effect (att.pr) for the treatment group is</li>
</ul>
<p><span class="math display">\[
\frac{1}{\sum_{i=1}^n t_i}\sum_{i:t_i=1}^n \left\{ Y_i(t_i=1) -
      \widehat{Y_i(t_i=0)}\right\},
\]</span></p>
<p>where <span class="math inline">\(t_i\)</span> is a binary explanatory variable defining the treatment (<span class="math inline">\(t_i=1\)</span>) and control (<span class="math inline">\(t_i=0\)</span>) groups. Variation in the simulations are due to uncertainty in simulating <span class="math inline">\(\widehat{Y_i(t_i=0)}\)</span>, the counterfactual predicted value of <span class="math inline">\(Y_i\)</span> for observations in the treatment group, under the assumption that everything stays the same except that the treatment indicator is switched to <span class="math inline">\(t_i=0\)</span>.</p>
</div>
<div id="output-values" class="section level2">
<h2 class="hasAnchor">
<a href="#output-values" class="anchor"></a>Output values</h2>
<p>The Zelig object stores fields containing everything needed to rerun the Zelig output, and all the results and simulations as they are generated. In addition to the summary functions demonstrated above, use standard R utility functions such as <code>coef</code>, <code>vcov</code>, <code>predict</code> to extract model estimates and <code>zelig_qi_to_df</code> to extract simulations.</p>
</div>
<div id="see-also" class="section level2">
<h2 class="hasAnchor">
<a href="#see-also" class="anchor"></a>See also</h2>
<p>The logit model is part of the stats R package. Advanced users may wish to refer to <code>help(glm)</code> and <code>help(family)</code>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#syntax">Syntax</a></li>
      <li><a href="#examples">Examples</a></li>
      <li><a href="#first-differences">First differences</a></li>
      <li><a href="#model-definition">Model Definition</a></li>
      <li><a href="#quantities-of-interest">Quantities of Interest</a></li>
      <li><a href="#output-values">Output values</a></li>
      <li><a href="#see-also">See also</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, Olivia Lau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
