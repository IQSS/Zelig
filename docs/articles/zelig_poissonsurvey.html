<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Poisson Survey Regression • Zelig</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/paper/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">Zelig Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/quickstart.html">Quickstart</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html#section-zelig-overview">Zelig Overview</a>
    </li>
    <li>
      <a href="../articles/index.html#section-core-zelig-model-details">Zelig Model Details</a>
    </li>
    <li>
      <a href="../articles/index.html#section-other">Other</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Function Reference
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html#section-main-zelig-workflow">Workflow</a>
    </li>
    <li>
      <a href="../reference/index.html#section-estimation-methods">Estimation Methods</a>
    </li>
    <li>
      <a href="../reference/index.html#section-exterior-interaction-functions">Interacting Outside of Zelig</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/about.html">Contact/Development Team/Citation</a>
    </li>
    <li>
      <a href="../articles/roadmap.html">Development Roadmap</a>
    </li>
    <li>
      <a href="https://iqss.github.io/rpackagemetrics/">Zelig Adoption Metrics</a>
    </li>
    <li>
      <a href="https://raw.githubusercontent.com/IQSS/Zelig/master/.iqss_reportcard.yml">Statistical Software Devepment Reportcard</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://medium.com/zelig-dev/archive">
    <span class="fa fa-medium"></span>
     
    Dev-Blog
  </a>
</li>
<li>
  <a href="https://twitter.com/zeligproject">
    <span class="fa fa-twitter fa-2x"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/IQSS/Zelig">
    <span class="fa fa-github fa-2x"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Poisson Survey Regression</h1>
            
            <h4 class="date">2017-05-08</h4>
          </div>

    
    
<div class="contents">
<p><em>Built using Zelig version 5.1.0.90000</em></p>
<hr>
<p>Poisson Regression for Event Count Dependent Variables with Survey Weights with <code>poisson.survey</code>.</p>
<p>Use the Poisson regression model if the observations of your dependent variable represents the number of independent events that occur during a fixed period of time (see the <a href="zelig_negbin.html">negative binomial model</a> for over-dispersed event counts.) For a Bayesian implementation of this model, see <a href="zelig_poissonbayes.html">Zelig Poisson Bayes</a>.</p>
<div id="syntax" class="section level2">
<h2 class="hasAnchor">
<a href="#syntax" class="anchor"></a>Syntax</h2>
<p>With reference classes:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z5 &lt;-<span class="st"> </span>zpoissonsurvey<span class="op">$</span><span class="kw">new</span>()
z5<span class="op">$</span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(Y <span class="op">~</span><span class="st"> </span>X1 <span class="op">+</span><span class="st"> </span>X <span class="op">~</span><span class="st"> </span>X, <span class="dt">weights =</span> w, <span class="dt">data =</span> mydata)
z5<span class="op">$</span><span class="kw"><a href="../reference/setx.html">setx</a></span>()
z5<span class="op">$</span><span class="kw"><a href="../reference/sim.html">sim</a></span>()</code></pre></div>
<p>With the Zelig 4 compatibility wrappers:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(Y <span class="op">~</span><span class="st"> </span>X1 <span class="op">+</span><span class="st"> </span>X2, <span class="dt">model =</span> <span class="st">"poisson.survey"</span>,
               <span class="dt">weights =</span> w, <span class="dt">data =</span> mydata)
x.out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out)
s.out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim.html">sim</a></span>(z.out, <span class="dt">x =</span> x.out)</code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div id="example-1-user-has-existing-sample-weights" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1-user-has-existing-sample-weights" class="anchor"></a>Example 1: User has Existing Sample Weights</h3>
<p>Attach sample data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(api, <span class="dt">package=</span><span class="st">"survey"</span>)</code></pre></div>
<p>In this example, we will estimate a model using each school’s academic performance in 2000 and an indicator for year-round schools to predict the number of students who enrolled in each California school.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(enroll <span class="op">~</span><span class="st"> </span>api99 <span class="op">+</span><span class="st"> </span>yr.rnd ,
                <span class="dt">model =</span> <span class="st">"poisson.survey"</span>, <span class="dt">data =</span> apistrat)</code></pre></div>
<pre><code>## How to cite this model in Zelig:
##   Nicholas Carnes. 2017.
##   poisson-survey: Poisson Regression with Survey Weights
##   in Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, and Olivia Lau,
##   "Zelig: Everyone's Statistical Software," http://zeligproject.org/</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(z.out1)</code></pre></div>
<pre><code>## Model: 
## 
## Call:
## z5$zelig(formula = enroll ~ api99 + yr.rnd, data = apistrat)
## 
## Survey design:
## survey::svydesign(data = data, ids = ids, probs = probs, strata = strata, 
##     fpc = fpc, nest = nest, check.strata = check.strata, weights = localWeights)
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)
## (Intercept)  7.1282917  0.2645220  26.948   &lt;2e-16
## api99       -0.0008395  0.0004091  -2.052   0.0415
## yr.rndYes    0.0556202  0.1730477   0.321   0.7482
## 
## (Dispersion parameter for poisson family taken to be 391.138)
## 
## Number of Fisher Scoring iterations: 5
## 
## Next step: Use 'setx' method</code></pre>
<p>Set explanatory variables to their default (mean/mode) values, and set a high (80th percentile) and low (20th percentile) value for the measure of academic performance, “api00”:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x.low &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out1, <span class="dt">api99=</span> <span class="kw">quantile</span>(apistrat<span class="op">$</span>api99, <span class="fl">0.2</span>))
x.high &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out1, <span class="dt">api99=</span> <span class="kw">quantile</span>(apistrat<span class="op">$</span>api99, <span class="fl">0.8</span>))</code></pre></div>
<p>Generate first differences for the effect of high versus low “meals” on the probability that a school will hold classes year round:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s.out1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim.html">sim</a></span>(z.out1, <span class="dt">x=</span>x.low, <span class="dt">x1=</span>x.high)
<span class="kw">summary</span>(s.out1)</code></pre></div>
<pre><code>## 
##  sim x :
##  -----
## ev
##          mean       sd      50%     2.5%   97.5%
## [1,] 817.1636 61.73815 815.3758 704.7528 941.267
## pv
##        mean       sd 50%   2.5% 97.5%
## [1,] 818.18 67.05647 817 688.95 953.1
## 
##  sim x1 :
##  -----
## ev
##          mean       sd      50%     2.5%    97.5%
## [1,] 671.6269 47.28784 670.2435 583.5333 769.5095
## pv
##         mean       sd   50%    2.5%   97.5%
## [1,] 671.552 53.03488 670.5 566.975 773.025
## fd
##           mean       sd       50%      2.5%     97.5%
## [1,] -145.5367 72.31272 -144.6802 -288.4826 -9.957065</code></pre>
<p>Generate a second set of fitted values and a plot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(s.out1)</code></pre></div>
<div class="figure">
<img src="zelig_poissonsurvey_files/figure-html/Zelig-poissonsurvey1-1.png" alt="Graphs of Quantities of Interest for Poisson Survey Model" width="672"><p class="caption">
Graphs of Quantities of Interest for Poisson Survey Model
</p>
</div>
</div>
<div id="example-2-user-has-details-about-complex-survey-design-but-not-sample-weights" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2-user-has-details-about-complex-survey-design-but-not-sample-weights" class="anchor"></a>Example 2: User has Details about Complex Survey Design (but not sample weights)</h3>
<p>Suppose that the survey house that provided the dataset excluded probability weights but made other details about the survey design available. We can still estimate a model without probability weights that takes instead variables that identify each the stratum and/or cluster from which each observation was selected and the size of the finite sample from which each observation was selected.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(enroll <span class="op">~</span><span class="st"> </span>api99 <span class="op">+</span><span class="st"> </span>yr.rnd ,
                <span class="dt">model =</span> <span class="st">"poisson.survey"</span>, <span class="dt">data =</span> apistrat,
                <span class="dt">strata =</span> <span class="op">~</span>stype, <span class="dt">fpc =</span> <span class="op">~</span>fpc)</code></pre></div>
<pre><code>## How to cite this model in Zelig:
##   Nicholas Carnes. 2017.
##   poisson-survey: Poisson Regression with Survey Weights
##   in Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, and Olivia Lau,
##   "Zelig: Everyone's Statistical Software," http://zeligproject.org/</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(z.out2)</code></pre></div>
<pre><code>## Model: 
## 
## Call:
## z5$zelig(formula = enroll ~ api99 + yr.rnd, data = apistrat, 
##     strata = ~stype, fpc = ~fpc)
## 
## Survey design:
## survey::svydesign(data = data, ids = ids, probs = probs, strata = strata, 
##     fpc = fpc, nest = nest, check.strata = check.strata, weights = localWeights)
## 
## Coefficients:
##               Estimate Std. Error t value Pr(&gt;|t|)
## (Intercept)  6.9287587  0.2177819  31.815  &lt; 2e-16
## api99       -0.0008984  0.0003316  -2.709  0.00734
## yr.rndYes    0.1207127  0.1097426   1.100  0.27270
## 
## (Dispersion parameter for poisson family taken to be 314.0072)
## 
## Number of Fisher Scoring iterations: 5
## 
## Next step: Use 'setx' method</code></pre>
<p>The coefficient estimates from this model are identical to point estimates in the previous example, but the standard errors are smaller. When sampling weights are omitted, Zelig estimates them automatically for “normal.survey” models based on the user-defined description of sampling designs. In addition, when user-defined descriptions of the sampling design are entered as inputs, variance estimates are better and standard errors are consequently smaller.</p>
<p>The methods setx() and sim() can then be run on z.out2 in the same fashion described in Example 1.</p>
</div>
<div id="example-3-user-has-replicate-weights" class="section level3">
<h3 class="hasAnchor">
<a href="#example-3-user-has-replicate-weights" class="anchor"></a>Example 3: User has Replicate Weights</h3>
<p>Load data for a model using the number of out-of-hospital cardiac arrests to predict the number of patients who arrive alive in hospitals.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(scd, <span class="dt">package=</span><span class="st">"survey"</span>)</code></pre></div>
<p>For the purpose of illustration, create four Balanced Repeated Replicate (BRR) weights:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">BRRrep&lt;-<span class="dv">2</span><span class="op">*</span><span class="kw">cbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>))</code></pre></div>
<p>Estimate the model using Zelig:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z.out3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/zelig.html">zelig</a></span>(alive <span class="op">~</span><span class="st"> </span>arrests , <span class="dt">model =</span> <span class="st">"poisson.survey"</span>,
                <span class="dt">repweights =</span> BRRrep, <span class="dt">type =</span> <span class="st">"BRR"</span>, <span class="dt">data =</span> scd)</code></pre></div>
<pre><code>## Warning in svrepdesign.default(data = data, repweights = repweights, type =
## type, : No sampling weights provided: equal probability assumed</code></pre>
<pre><code>## How to cite this model in Zelig:
##   Nicholas Carnes. 2017.
##   poisson-survey: Poisson Regression with Survey Weights
##   in Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, and Olivia Lau,
##   "Zelig: Everyone's Statistical Software," http://zeligproject.org/</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(z.out3)</code></pre></div>
<pre><code>## Model: 
## 
## Call:
## z5$zelig(formula = alive ~ arrests, data = scd, repweights = BRRrep, 
##     type = "BRR")
## 
## Survey design:
## svrepdesign.default(data = data, repweights = repweights, type = type, 
##     weights = localWeights, combined.weights = combined.weights, 
##     rho = rho, bootstrap.average = bootstrap.average, scale = scale, 
##     rscales = rscales, fpctype = fpctype, fpc = fpc)
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)
## (Intercept) 3.1552572  0.1426950  22.112  0.00204
## arrests     0.0019342  0.0002659   7.273  0.01838
## 
## (Dispersion parameter for poisson family taken to be 1.083471)
## 
## Number of Fisher Scoring iterations: 4
## 
## Next step: Use 'setx' method</code></pre>
<p>Set the explanatory variables at their means and set arrests at its 20th and 80th quartiles</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x.low &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out3, <span class="dt">arrests =</span> <span class="kw">quantile</span>(scd<span class="op">$</span>arrests, .<span class="dv">2</span>))
x.high &lt;-<span class="st"> </span><span class="kw"><a href="../reference/setx.html">setx</a></span>(z.out3, <span class="dt">arrests =</span> <span class="kw">quantile</span>(scd<span class="op">$</span>arrests,.<span class="dv">8</span>))</code></pre></div>
<p>Generate first differences for the effect of the minimum versus the maximum number of individuals who arrive alive on the probability that a hospital will be sued:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">s.out3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim.html">sim</a></span>(z.out3, <span class="dt">x=</span>x.high, <span class="dt">x1=</span>x.low)
<span class="kw">summary</span>(s.out3)</code></pre></div>
<pre><code>## 
##  sim x :
##  -----
## ev
##          mean       sd      50%     2.5%    97.5%
## [1,] 65.25006 4.440585 65.11013 56.82662 74.35446
## pv
##        mean       sd 50% 2.5%  97.5%
## [1,] 65.254 9.006809  65   49 84.025
## 
##  sim x1 :
##  -----
## ev
##          mean       sd      50%     2.5%    97.5%
## [1,] 29.79284 3.519312 29.62834 23.44793 36.86325
## pv
##        mean       sd 50% 2.5% 97.5%
## [1,] 29.604 6.312768  29   18    43
## fd
##           mean       sd       50%      2.5%     97.5%
## [1,] -35.45722 4.405681 -35.40398 -44.63728 -27.07315</code></pre>
<p>Generate a second set of fitted values and a plot:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(s.out3)</code></pre></div>
<div class="figure">
<img src="zelig_poissonsurvey_files/figure-html/Zelig-poissonsurvey3-1.png" alt="Graphs of Quantities of Interest for Poisson Survey Model" width="672"><p class="caption">
Graphs of Quantities of Interest for Poisson Survey Model
</p>
</div>
<p>The user should also refer to the poisson model demo, since poisson.survey models can take many of the same options as poisson models.</p>
</div>
</div>
<div id="model" class="section level2">
<h2 class="hasAnchor">
<a href="#model" class="anchor"></a>Model</h2>
<p>Let <span class="math inline">\(Y_i\)</span> be the number of independent events that occur during a fixed time period. This variable can take any non-negative integer.</p>
<ul>
<li>The Poisson distribution has <em>stochastic component</em>
</li>
</ul>
<p><span class="math display">\[
    Y_i \; \sim \; \textrm{Poisson}(\lambda_i),
\]</span></p>
<p>where <span class="math inline">\(\lambda_i\)</span> is the mean and variance parameter.</p>
<ul>
<li>The <em>systematic component</em> is</li>
</ul>
<p><span class="math display">\[
    \lambda_i \; = \; \exp(x_i \beta),
\]</span></p>
<p>where <span class="math inline">\(x_i\)</span> is the vector of explanatory variables, and <span class="math inline">\(\beta\)</span> is the vector of coefficients.</p>
</div>
<div id="quantities-of-interest" class="section level2">
<h2 class="hasAnchor">
<a href="#quantities-of-interest" class="anchor"></a>Quantities of Interest</h2>
<ul>
<li>The expected value (qi$ev) is the mean of simulations from the stochastic component,</li>
</ul>
<p><span class="math display">\[
    E(Y) = \lambda_i =  \exp(x_i
        \beta),
\]</span></p>
<p>given draws of <span class="math inline">\(\beta\)</span> from its sampling distribution.</p>
<ul>
<li><p>The predicted value (qi$pr) is a random draw from the poisson distribution defined by mean <span class="math inline">\(\lambda_i\)</span>.</p></li>
<li><p>The first difference in the expected values (qi$fd) is given by:</p></li>
</ul>
<p><span class="math display">\[
    \textrm{FD} \; = \; E(Y | x_1) - E(Y \mid x)
\]</span></p>
<ul>
<li>In conditional prediction models, the average expected treatment effect (att.ev) for the treatment group is</li>
</ul>
<p><span class="math display">\[
    \frac{1}{\sum_{i=1}^n t_i}\sum_{i:t_i=1}^n \left\{ Y_i(t_i=1) -
        E[Y_i(t_i=0)] \right\},
\]</span></p>
<p>where <span class="math inline">\(t_i\)</span> is a binary explanatory variable defining the treatment (<span class="math inline">\(t_i=1\)</span>) and control (<span class="math inline">\(t_i=0\)</span>) groups. Variation in the simulations are due to uncertainty in simulating <span class="math inline">\(E[Y_i(t_i=0)]\)</span>, the counterfactual expected value of <span class="math inline">\(Y_i\)</span> for observations in the treatment group, under the assumption that everything stays the same except that the treatment indicator is switched to <span class="math inline">\(t_i=0\)</span>.</p>
<ul>
<li>In conditional prediction models, the average predicted treatment effect (att.pr) for the treatment group is</li>
</ul>
<p><span class="math display">\[
    \frac{1}{\sum_{i=1}^n t_i}\sum_{i:t_i=1}^n \left\{ Y_i(t_i=1) -
        \widehat{Y_i(t_i=0)} \right\},
\]</span></p>
<p>where <span class="math inline">\(t_i\)</span> is a binary explanatory variable defining the treatment (<span class="math inline">\(t_i=1\)</span>) and control (<span class="math inline">\(t_i=0\)</span>) groups. Variation in the simulations are due to uncertainty in simulating <span class="math inline">\(\widehat{Y_i(t_i=0)}\)</span>, the counterfactual predicted value of <span class="math inline">\(Y_i\)</span> for observations in the treatment group, under the assumption that everything stays the same except that the treatment indicator is switched to <span class="math inline">\(t_i=0\)</span>.</p>
</div>
<div id="output-values" class="section level2">
<h2 class="hasAnchor">
<a href="#output-values" class="anchor"></a>Output Values</h2>
<p>The Zelig object stores fields containing everything needed to rerun the Zelig output, and all the results and simulations as they are generated. In addition to the summary commands demonstrated above, some simply utility functions (known as <em>getters</em>) provide easy access to the raw fields most commonly of use for further investigation.</p>
<p>In the example above <code>z.out$get_coef()</code> returns the estimated coefficients, <code>z.out$get_vcov()</code> returns the estimated covariance matrix, and <code>z.out$get_predict()</code> provides predicted values for all observations in the dataset from the analysis.</p>
</div>
<div id="see-also" class="section level2">
<h2 class="hasAnchor">
<a href="#see-also" class="anchor"></a>See also</h2>
<p>The poissonsurvey model is part of the survey package by Thomas Lumley, which in turn depends heavily on the glm package. Advanced users may wish to refer to <code>help(glm)</code> and <code>help(family)</code>.</p>
<p>Lumley T (2016). “survey: analysis of complex survey samples.” R package version 3.31-5.</p>
<p>Lumley T (2004). “Analysis of Complex Survey Samples.” <em>Journal of Statistical Software</em>, <strong>9</strong> (1), pp. 1-19. R package verson 2.2.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#syntax">Syntax</a></li>
      <li><a href="#example">Example</a></li>
      <li><a href="#model">Model</a></li>
      <li><a href="#quantities-of-interest">Quantities of Interest</a></li>
      <li><a href="#output-values">Output Values</a></li>
      <li><a href="#see-also">See also</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Christine Choirat, Christopher Gandrud, James Honaker, Kosuke Imai, Gary King, Olivia Lau.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
